(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2e9db2bc"],{5176:function(e,t,a){e.exports=a("51b6")},"9daa":function(e,t,a){},a980:function(e,t,a){"use strict";var l=a("9daa"),r=a.n(l);r.a},bae6:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"list-common-box"},[a("div",{staticClass:"title-box"},[a("Breadcrumb",{attrs:{isLevel:2}}),a("div",{staticClass:"rightbox"},[a("div",{staticClass:"item",on:{click:function(t){return e.handleAdd()}}},[a("cc-svg-icon",{attrs:{"icon-class":"add"}}),a("span",[e._v("新增")])],1)])],1),a("div",{staticClass:"card-box"},[a("div",{staticClass:"search-bar"},[a("div",{staticClass:"search-left"},[a("div",{staticClass:"search-item"},[a("span",{staticClass:"search-label"},[e._v("标签名称")]),a("el-input",{attrs:{placeholder:"请输入标签名称",clearable:""},model:{value:e.searchKey.labelName,callback:function(t){e.$set(e.searchKey,"labelName","string"===typeof t?t.trim():t)},expression:"searchKey.labelName"}})],1),a("div",{staticClass:"search-item"},[a("span",{staticClass:"search-label"},[e._v("标签编码")]),a("el-input",{attrs:{placeholder:"请输入标签编码",clearable:""},model:{value:e.searchKey.labelId,callback:function(t){e.$set(e.searchKey,"labelId","string"===typeof t?t.trim():t)},expression:"searchKey.labelId"}})],1),a("div",{staticClass:"search-item"},[a("span",{staticClass:"search-label"},[e._v("状态")]),a("el-select",{attrs:{placeholder:"请选择状态",clearable:""},model:{value:e.searchKey.labelStatus,callback:function(t){e.$set(e.searchKey,"labelStatus",t)},expression:"searchKey.labelStatus"}},e._l(e.statusOption,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)]),a("div",{staticClass:"search-right"},[a("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-search"},on:{click:function(t){return e.querylist()}}},[e._v("查询")]),a("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-delete"},on:{click:function(t){return e.Refreshlist()}}},[e._v("清空")])],1)]),a("div",{staticClass:"table-box"},[a("el-table",{attrs:{data:e.dataList,"tooltip-effect":"dark",stripe:"",height:"100%"}},[a("el-table-column",{attrs:{label:"序号",align:"center",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.$index+(e.pageNum-1)*e.pageSize+1)+"\n          ")]}}])}),a("el-table-column",{attrs:{prop:"labelName",label:"标签名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.labelName?t.row.labelName:e.EMPTYTEXT)+"\n          ")]}}])}),a("el-table-column",{attrs:{prop:"labelId",label:"标签编码",align:"center",width:"190"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.labelId?t.row.labelId:e.EMPTYTEXT)+"\n          ")]}}])}),a("el-table-column",{attrs:{prop:"labelShortName",label:"标签简称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.labelShortName?t.row.labelShortName:e.EMPTYTEXT)+"\n          ")]}}])}),a("el-table-column",{attrs:{prop:"labelRgbCode",label:"标签颜色RGB代码",align:"center",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.labelRgbCode?t.row.labelRgbCode:e.EMPTYTEXT)+"\n          ")]}}])}),a("el-table-column",{attrs:{prop:"labelDesc",label:"标签描述",align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.labelDesc?t.row.labelDesc:e.EMPTYTEXT)+"\n          ")]}}])}),a("el-table-column",{attrs:{prop:"labelStatus",label:"状态",align:"center",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(1===t.row.labelStatus?"已启用":2===t.row.labelStatus?"已禁用":e.EMPTYTEXT)+"\n          ")]}}])}),a("el-table-column",{attrs:{prop:"createDateStr",label:"创建时间",align:"center",width:"170"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.createDateStr?t.row.createDateStr:e.EMPTYTEXT)+"\n          ")]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("cc-svg-icon",{attrs:{"icon-class":"edit"},on:{click:function(a){return e.handleAdd(t.row.labelId)}}})]}}])})],1)],1),a("div",{staticClass:"page-box"},[a("Paginaction",{ref:"paginationEvent",staticClass:"pagination",attrs:{goPage:e.pageNum,totalNum:e.totalNum},on:{updateList:e.changePage}})],1)]),a("addTag",{attrs:{id:e.labelId},on:{refresh:e.getDatalist},model:{value:e.tagDialog,callback:function(t){e.tagDialog=t},expression:"tagDialog"}})],1)},r=[],s=a("5176"),o=a.n(s),i=a("a4bb"),n=a.n(i),c=(a("ac6a"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.id?"修改标签":"新增标签",visible:e.show,center:"",width:"550px","close-on-click-modal":!1},on:{"update:visible":function(t){e.show=t},close:function(t){return e.resetForm("ruleForm")}}},[a("el-form",{ref:"ruleForm",staticClass:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"130px"}},[e.id?a("el-form-item",{attrs:{label:"标签编码：",prop:"labelId"}},[a("p",[e._v(e._s(e.ruleForm.labelId||e.EMPTYTEXT))])]):e._e(),a("el-form-item",{attrs:{label:"标签简称：",prop:e.id?"":"labelShortName"}},[e.id?[a("p",[e._v(e._s(e.ruleForm.labelShortName||e.EMPTYTEXT))])]:[a("el-input",{staticClass:"input-box",attrs:{placeholder:"请输入标签简称",clearable:"",maxlength:"50"},model:{value:e.ruleForm.labelShortName,callback:function(t){e.$set(e.ruleForm,"labelShortName","string"===typeof t?t.trim():t)},expression:"ruleForm.labelShortName"}})]],2),a("el-form-item",{attrs:{label:"标签名称：",prop:e.id?"":"labelName"}},[e.id?[a("p",[e._v(e._s(e.ruleForm.labelName||e.EMPTYTEXT))])]:[a("el-input",{staticClass:"input-box",attrs:{placeholder:"请输入标签名称",clearable:"",maxlength:"50"},model:{value:e.ruleForm.labelName,callback:function(t){e.$set(e.ruleForm,"labelName","string"===typeof t?t.trim():t)},expression:"ruleForm.labelName"}})]],2),a("el-form-item",{attrs:{label:"标签RGB颜色：",prop:"labelRgbCode"}},[a("el-color-picker",{attrs:{size:"small"},model:{value:e.ruleForm.labelRgbCode,callback:function(t){e.$set(e.ruleForm,"labelRgbCode",t)},expression:"ruleForm.labelRgbCode"}})],1),a("el-form-item",{attrs:{label:"标签描述：",prop:"labelDesc"}},[a("el-input",{staticClass:"input-box",attrs:{placeholder:"请输入标签描述",clearable:"",maxlength:"100"},model:{value:e.ruleForm.labelDesc,callback:function(t){e.$set(e.ruleForm,"labelDesc","string"===typeof t?t.trim():t)},expression:"ruleForm.labelDesc"}})],1),a("el-form-item",{attrs:{label:"状态：",prop:"labelStatus"}},[a("el-select",{staticClass:"input-box",attrs:{placeholder:"请选择状态"},model:{value:e.ruleForm.labelStatus,callback:function(t){e.$set(e.ruleForm,"labelStatus",t)},expression:"ruleForm.labelStatus"}},e._l(e.statusOption,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确 认")])],1)],1)}),u=[],b=(a("c5f6"),{name:"addTag",props:{value:{type:Boolean},id:{type:[String,Number],value:""}},model:{prop:"value",event:"change"},watch:{value:function(e){this.show=this.value,!0===this.show&&(this.id?this.getLabelDetail():this.initForm())}},data:function(){return{show:this.value,ruleForm:{labelId:"",labelShortName:"",labelName:"",labelRgbCode:"#f00",labelDesc:"",labelStatus:1},statusOption:[{value:1,label:"已启用"},{value:2,label:"已禁用"}],rules:{labelShortName:[{required:!0,message:"标签简称不能为空",trigger:"blur"}],labelName:[{required:!0,message:"标签名称不能为空",trigger:"blur"}],labelRgbCode:[{required:!0,message:"请选择标签RGB颜色",trigger:"change"}],labelDesc:[{required:!0,message:"标签描述不能为空",trigger:"blur"}],labelStatus:[{required:!0,message:"请选择标签状态",trigger:"change"}]}}},methods:{getLabelDetail:function(){var e=this;this.$http.get("http://bj-ihealthcare.com:52081/phs/family/label/getByLabelId?labelId="+this.id).then(function(t){if(200===t.code){var a=t.data;for(var l in e.ruleForm)e.ruleForm[l]=a[l]}else e.$message.error(t.msg)}).catch(function(t){e.$message.error(t)})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){e&&(t.id?(t.ruleForm.labelId=t.id,t.editLabel(t.ruleForm)):(delete t.ruleForm.labelId,t.addLabel(t.ruleForm)))})},addLabel:function(e){var t=this;this.$http.post("http://bj-ihealthcare.com:52081/phs/family/label/insert",e).then(function(e){200===e.code?(t.$message.success("添加成功"),t.show=!1,t.$emit("change",!1),t.$emit("refresh")):t.$message.error(e.msg)}).catch(function(e){t.$message.error(e)})},editLabel:function(e){var t=this;this.$http.post("http://bj-ihealthcare.com:52081/phs/family/label/update",e).then(function(e){200===e.code?(t.$message.success("修改成功"),t.show=!1,t.$emit("change",!1),t.$emit("refresh")):t.$message.error(e.msg)}).catch(function(e){t.$message.error(e)})},initForm:function(){var e=this;n()(this.ruleForm).forEach(function(t){return e.ruleForm[t]=""}),this.ruleForm.labelStatus=1,this.ruleForm.labelRgbCode="#f00"},resetForm:function(e){var t=this;this.show=!1,this.$emit("change",!1),this.$nextTick(function(){t.$refs[e].clearValidate()})}}}),m=b,d=(a("a980"),a("2877")),h=Object(d["a"])(m,c,u,!1,null,"5feb9b2f",null),p=h.exports,g={name:"tag-list",components:{addTag:p},data:function(){return{searchKey:{labelName:"",labelId:"",labelStatus:""},statusOption:[{value:0,label:"全部"},{value:1,label:"已启用"},{value:2,label:"已禁用"}],pageNum:1,pageSize:10,totalNum:0,dataList:[],tagDialog:!1,labelId:""}},created:function(){this.getDatalist()},methods:{handleAdd:function(e){this.tagDialog=!0,this.labelId=e||""},querylist:function(){this.pageNum=1,this.getDatalist()},Refreshlist:function(){var e=this;this.pageNum=1,this.pageSize=10,n()(this.searchKey).forEach(function(t){return e.searchKey[t]=""}),this.getDatalist()},changePage:function(e){this.pageNum=e.pageNum,this.pageSize=e.pageSize,this.getDatalist()},getDatalist:function(){var e=this;this.$emit("viewLoad",!0);var t={};t.pageNum=this.pageNum,t.pageSize=this.pageSize,t=o()({},t,this.searchKey),this.$http.post("http://bj-ihealthcare.com:52081/phs/family/label/getByPage",t).then(function(t){200===t.code?(e.dataList=t.data.list||[],e.totalNum=t.data.total,e.pageNum=t.data.pageNum,e.pageSize=t.data.pageSize):e.$message.error(t.msg),e.$emit("viewLoad",!1)}).catch(function(t){e.$emit("viewLoad",!1),e.$message.error(t)})}}},f=g,v=Object(d["a"])(f,l,r,!1,null,"fe0105c8",null);t["default"]=v.exports}}]);
//# sourceMappingURL=chunk-2e9db2bc.d0e5e79a.js.map