(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-962515d4"],{"50f8":function(e,t,r){},"5cc4":function(e,t,r){"use strict";var s=r("50f8"),i=r.n(s);i.a},6557:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"clinic-report-box"},[r("div",{staticClass:"title-box"},[r("Breadcrumb",{attrs:{isLevel:2}})],1),r("div",{staticClass:"inner-box"},[r("h2",{staticClass:"title"},[e._v("基本信息")]),e.reportInfo&&e.reportInfo[0]?r("div",{staticClass:"text-box"},[r("ul",[r("li",[r("span",[e._v("姓名：")]),r("label",[e._v(e._s(e.reportInfo[0].userName||e.EMPTYTEXT))])]),r("li",[r("span",[e._v("性别：")]),r("label",[e._v(e._s(e.reportInfo[0].sexTypeStr||e.EMPTYTEXT))])]),r("li",[r("span",[e._v("年龄：")]),r("label",[e._v(e._s(null!==e.reportInfo[0].age?e.reportInfo[0].age+"岁":e.EMPTYTEXT))])]),r("li",[r("span",[e._v("身份证号：")]),r("label",[e._v(e._s(e.reportInfo[0].idNo||e.EMPTYTEXT))])]),r("li",[r("span",[e._v("体检日期：")]),r("label",[e._v(e._s(e.reportInfo[0].createDateStr?e.reportInfo[0].createDateStr.substr(0,10):e.EMPTYTEXT))])])])]):e._e(),r("div",{staticClass:"report-box"},[r("div",{staticClass:"report-title-box"},[r("h4",[e._v("主导报告:")]),r("div",{staticClass:"content-box"},[r("el-radio-group",{on:{change:e.handleSelect},model:{value:e.selectIndex,callback:function(t){e.selectIndex=t},expression:"selectIndex"}},e._l(e.reportInfo,function(t,s){return r("el-radio",{key:s,attrs:{label:s}},[e._v(e._s("报告"+(s+1)+"："+t.createDateStr))])}),1)],1)]),r("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"20%","label-position":"left"}},[e._l(e.ruleForm.resultList,function(t,s){return r("div",{key:s,staticClass:"item-box"},[r("h3",[e._v(e._s(t.projectName))]),e._l(t.childrens,function(t,s){return r("div",{key:s},[r("el-form-item",{attrs:{label:t.itemName+"："}},[r("el-radio-group",{model:{value:t.resultDesc,callback:function(r){e.$set(t,"resultDesc",r)},expression:"it.resultDesc"}},e._l(t.resultDescArr,function(t,s){return r("el-radio",{key:s,attrs:{label:t}},[e._v(e._s(t.split("-")[1]||"-"))])}),1)],1)],1)})],2)}),r("el-form-item",{attrs:{label:"诊断意见：",prop:"diagnoseOpinion"}},[r("el-input",{attrs:{type:"textarea",maxlength:"128"},model:{value:e.ruleForm.diagnoseOpinion,callback:function(t){e.$set(e.ruleForm,"diagnoseOpinion","string"===typeof t?t.trim():t)},expression:"ruleForm.diagnoseOpinion"}})],1)],2),r("div",{staticClass:"btn-box"},[r("el-button",{on:{click:function(t){return e.handleBackList()}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("合并体检报告")])],1)],1)])])},i=[],n=(r("28a5"),r("75fc")),o=r("f499"),l=r.n(o),a=(r("7514"),r("ac6a"),{name:"clinic-report",data:function(){return{reportInfo:[],selectIndex:0,ruleForm:{resultList:[],diagnoseOpinion:""},rules:{diagnoseOpinion:[{required:!0,message:"请填写诊断意见",trigger:"change"}]}}},created:function(){this.getDetailInfo()},methods:{handleSelect:function(e){this.ruleForm.resultList.forEach(function(t){t.childrens.forEach(function(t){t.resultDesc=t.resultDescArr[e]})})},getDetailInfo:function(){var e=this;this.$emit("viewLoad",!0),this.$http.post("http://bj-ihealthcare.com:52081/phs/family/examResult/getDtoByResultIdList",{resultIdList:this.$route.query.ids}).then(function(t){200===t.code?(e.reportInfo=t.data||[],e.ruleForm.resultList=[],e.reportInfo.forEach(function(t,r){t.items.forEach(function(t){if(e.ruleForm.resultList.length>0){var s=e.ruleForm.resultList.find(function(e){return e.projectId==t.projectId});if(s){var i=s.childrens.find(function(e){return e.itemId==t.itemId});if(i)i.resultDescArr.push(void 0!==t.resultDesc?r+"-"+t.resultDesc:r+"-");else{var n={};n.itemId=t.itemId,n.itemName=t.itemName,n.resultDescArr=[],n.resultDescArr.push(void 0!==t.resultDesc?r+"-"+t.resultDesc:r+"-"),n.resultDesc=n.resultDescArr[0],s.childrens.push(n)}}else{var o={};o.projectId=t.projectId,o.projectName=t.projectName,o.childrens=[];var l={};l.itemId=t.itemId,l.itemName=t.itemName,l.resultDescArr=[],l.resultDescArr.push(void 0!==t.resultDesc?r+"-"+t.resultDesc:r+"-"),l.resultDesc=l.resultDescArr[0],o.childrens.push(l),e.ruleForm.resultList.push(o)}}else{var a={};a.projectId=t.projectId,a.projectName=t.projectName,a.childrens=[];var c={};c.itemId=t.itemId,c.itemName=t.itemName,c.resultDescArr=[],c.resultDescArr.push(void 0!==t.resultDesc?r+"-"+t.resultDesc:r+"-"),c.resultDesc=c.resultDescArr[0],a.childrens.push(c),e.ruleForm.resultList.push(a)}})})):e.$message.error(t.msg),e.$emit("viewLoad",!1)}).catch(function(t){e.$emit("viewLoad",!1),e.$message.error(t)})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var r={};r.resultIdList=t.$route.query.ids,r.recordId=t.reportInfo[0]&&t.reportInfo[0].recordId,r.diagnoseOpinion=t.ruleForm.diagnoseOpinion;var s=JSON.parse(l()(t.ruleForm.resultList)),i=[];s.map(function(e){return i.push.apply(i,Object(n["a"])(e.childrens))}),i.map(function(e){e.resultDesc=e.resultDesc.split("-")[1],delete e.resultDescArr,delete e.itemName}),r.itemsJson=l()(i),t.$confirm("合并报告后将删除已选的报告，确认合并？","提示",{confirmButtonText:"确 认",cancelButtonText:"取 消",customClass:"infoMessage",center:!0}).then(function(){t.$http.post("http://bj-ihealthcare.com:52081/phs/family/examResult/mergeExamResult",r).then(function(e){200===e.code?(t.$message.success("合并成功"),t.handleBackList()):t.$message.error(e.msg)}).catch(function(e){t.$message.error(e)})})}})},handleBackList:function(){this.$router.push({path:"/clinic-manage/list"})}}}),c=a,u=(r("5cc4"),r("2877")),m=Object(u["a"])(c,s,i,!1,null,"15cb1289",null);t["default"]=m.exports}}]);
//# sourceMappingURL=chunk-962515d4.a1b56fdb.js.map