(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6161e5f6"],{"0850":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"list-common-box flex-column"},[a("div",{staticClass:"title-box"},[a("Breadcrumb",{attrs:{isLevel:2}})],1),a("div",{staticClass:"count-box flex-overflow"},[a("div",{staticClass:"count-top-box"},[a("div",{staticClass:"card-box"},[a("div",{staticClass:"search-bar"},[a("div",{staticClass:"search-left"},[a("div",{staticClass:"search-item"},[a("span",{staticClass:"search-label"},[t._v("统计时间")]),a("el-date-picker",{attrs:{type:"daterange",align:"left","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions,"value-format":"yyyy-MM-dd",clearable:""},on:{change:t.handleDatechange},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),a("div",{staticClass:"search-item"},[a("span",{staticClass:"search-label"},[t._v("所属机构")]),a("treeselect",{attrs:{multiple:!1,options:t.OrganOptions,placeholder:"请选择机构"},model:{value:t.searchKey.organizationId,callback:function(e){t.$set(t.searchKey,"organizationId",e)},expression:"searchKey.organizationId"}})],1)]),a("div",{staticClass:"search-right"},[a("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-search"},on:{click:function(e){return t.querylist()}}},[t._v("查询")]),a("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-delete"},on:{click:function(e){return t.Refreshlist()}}},[t._v("清空")])],1)]),a("div",{staticClass:"table-box"},[a("el-table",{attrs:{data:t.dataList,"tooltip-effect":"dark",stripe:""}},[a("el-table-column",{attrs:{label:"序号",align:"center",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\r\n                "+t._s(e.$index+(t.pageNum-1)*t.pageSize+1)+"\r\n              ")]}}])}),a("el-table-column",{attrs:{prop:"organizationName",label:"机构",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\r\n                "+t._s(e.row.organizationName?e.row.organizationName:t.EMPTYTEXT)+"\r\n              ")]}}])}),a("el-table-column",{attrs:{prop:"areaLivePeople",label:"户籍人口 ",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\r\n                "+t._s(""!==e.row.areaLivePeople?e.row.areaLivePeople:t.EMPTYTEXT)+"\r\n              ")]}}])}),a("el-table-column",{attrs:{prop:"inareaLivePeople",label:"非辖区内常住人口",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\r\n                "+t._s(""!==e.row.inareaLivePeople?e.row.inareaLivePeople:t.EMPTYTEXT)+"\r\n              ")]}}])}),a("el-table-column",{attrs:{prop:"totalLivePeople",label:"总居民数",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\r\n               "+t._s(""!==e.row.totalLivePeople?e.row.totalLivePeople:t.EMPTYTEXT)+"\r\n              ")]}}])}),a("el-table-column",{attrs:{prop:"limitTotalTaget",label:"限制签约人数",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\r\n                "+t._s(""!==e.row.limitTotalTaget?e.row.limitTotalTaget:t.EMPTYTEXT)+"\r\n              ")]}}])}),a("el-table-column",{attrs:{prop:"actualTotal",label:"实际签约人数",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("                  \r\n                "+t._s(""!==e.row.actualTotal?e.row.actualTotal:t.EMPTYTEXT)+"\r\n              ")]}}])}),a("el-table-column",{attrs:{prop:"actualAppoint",label:"履约人数",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("                  \r\n                "+t._s(""!==e.row.actualAppoint?e.row.actualAppoint:t.EMPTYTEXT)+"\r\n              ")]}}])}),a("el-table-column",{attrs:{prop:"totalTarget",label:"目标签约人数",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("                  \r\n                "+t._s(""!==e.row.totalTarget?e.row.totalTarget:t.EMPTYTEXT)+"\r\n              ")]}}])}),a("el-table-column",{attrs:{prop:"targetSignRate",label:"目标签约率",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" \r\n                "+t._s(""!==e.row.targetSignRate?e.row.targetSignRate:t.EMPTYTEXT)+"                 \r\n              ")]}}])}),a("el-table-column",{attrs:{prop:"actualTargetSignRate",label:"签约率（%）",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("                  \r\n                "+t._s(""!==e.row.actualTargetSignRate?e.row.actualTargetSignRate+"%":t.EMPTYTEXT)+"\r\n              ")]}}])}),a("el-table-column",{attrs:{prop:"targetFinishRate",label:"目标完成率",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("                  \r\n                "+t._s(""!==e.row.targetFinishRate?e.row.targetFinishRate:t.EMPTYTEXT)+"\r\n              ")]}}])}),a("el-table-column",{attrs:{prop:"appointRate",label:"履约率（%）",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("                  \r\n                "+t._s(""!==e.row.appointRate?e.row.appointRate+"%":t.EMPTYTEXT)+"\r\n              ")]}}])}),a("el-table-column",{attrs:{prop:"recordPersonTotal",label:"建档人数",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("                  \r\n                "+t._s(""!==e.row.recordPersonTotal?e.row.recordPersonTotal:t.EMPTYTEXT)+"\r\n              ")]}}])}),a("el-table-column",{attrs:{prop:"actualAppointTime",label:"实际履约人数",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("                  \r\n                "+t._s(""!==e.row.actualAppointTime?e.row.actualAppointTime:t.EMPTYTEXT)+"\r\n              ")]}}])})],1)],1),a("div",{staticClass:"page-box"},[a("Paginaction",{ref:"paginationEvent",staticClass:"pagination",attrs:{goPage:t.pageNum,totalNum:t.totalNum,pageNum:t.pageSize},on:{updateList:t.changePage}})],1)])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.dataList.length>0,expression:"dataList.length>0"}],staticClass:"count-bottom-box"},[a("h3",[t._v("数据对比")]),a("div",{staticClass:"echart-box"},[a("ColumnChart",{directives:[{name:"show",rawName:"v-show",value:t.signData,expression:"signData"}],attrs:{id:"organSignChart",chartData:t.signData}})],1),a("ColumnChart",{directives:[{name:"show",rawName:"v-show",value:t.signRateData,expression:"signRateData"}],attrs:{id:"organSignRateChart",chartData:t.signRateData}})],1)])])},i=[],r=a("5176"),l=a.n(r),o=a("f499"),s=a.n(o),c=(a("a481"),a("a4bb")),u=a.n(c),p=(a("ac6a"),a("210f")),g=a("7026"),h=a.n(g),f=(a("542c"),a("e9ad")),d={name:"organ-count",components:{Treeselect:h.a,ColumnChart:f["a"]},data:function(){return{date:"",searchKey:{startDate:"",endDate:"",organizationId:null},pickerOptions:p["a"],pageNum:1,pageSize:10,totalNum:0,dataList:[],OrganOptions:[],signData:null,signRateData:null,signDataObj:{title:"",legend:[],xAxis:[],series:[]},signRateDataObj:{title:"",legend:[],xAxis:[],series:[]}}},created:function(){this.getOrganList(),this.getDatalist()},methods:{handleDatechange:function(t){t&&t.length>0?(this.searchKey.startDate=t[0],this.searchKey.endDate=t[1]):(this.searchKey.startDate="",this.searchKey.endDate="")},querylist:function(){this.pageNum=1,this.getDatalist()},Refreshlist:function(){var t=this;this.pageNum=1,this.pageSize=10,this.date="",u()(this.searchKey).forEach(function(e){return t.searchKey[e]=""}),this.searchKey.organizationId=null,this.getDatalist()},changePage:function(t){this.pageNum=t.pageNum,this.pageSize=t.pageSize,this.getDatalist()},getOrganList:function(){var t=this;this.$http.post("http://bj-ihealthcare.com:52081/phs/service/organization/getOrganization").then(function(e){if(200===e.code){var a=JSON.parse(s()(e.data).replace(/organizationId/g,"id").replace(/name/g,"label").replace(/childrens/g,"children"));t.OrganOptions=a}else t.OrganOptions=[],t.$message.error(e.msg)}).catch(function(e){t.$message.error(e)})},getDatalist:function(t){var e=this;this.$emit("viewLoad",!0);var a={};a.pageNum=this.pageNum,a.pageSize=this.pageSize,a=l()({},a,this.searchKey),this.$http.post("http://bj-ihealthcare.com:52081/phs/service/organization/getStatDtoByPage",a).then(function(t){if(200===t.code){if(e.dataList=t.data.list||[],e.totalNum=t.data.total,e.pageNum=t.data.pageNum,e.pageSize=t.data.pageSize,e.dataList.length>0){e.signData=l()({},e.signDataObj),e.signRateData=l()({},e.signRateDataObj);var a=[],n=[],i=[],r=[],o=[];e.dataList.forEach(function(t){a.push(t.organizationName||""),n.push(t.totalTarget),i.push(t.actualTotal),r.push(t.actualTargetSignRate),o.push(t.appointRate)}),e.signData.type=1,e.signData.title="签约人数统计",e.signData.legend=["目标签约人数","实际签约人数"],e.signData.xAxis=a,e.signData.series=[n,i],e.signRateData.type=2,e.signRateData.title="签约率/履约率统计",e.signRateData.legend=["签约率","履约率"],e.signRateData.xAxis=a,e.signRateData.series=[r,o]}}else e.$message.error(t.msg);e.$emit("viewLoad",!1)}).catch(function(t){e.$emit("viewLoad",!1),e.$message.error(t)})}}},m=d,v=(a("23ed"),a("2877")),b=Object(v["a"])(m,n,i,!1,null,null,null);e["default"]=b.exports},"210f":function(t,e,a){"use strict";var n={shortcuts:[{text:"昨天",onClick:function(t){var e=new Date;e.setTime(e.getTime()-864e5);var a=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate();t.$emit("pick",[a,a])}},{text:"今天",onClick:function(t){var e=new Date;t.$emit("pick",[e,e])}},{text:"上周",onClick:function(t){var e=new Date,a=e.getFullYear(),n=e.getMonth(),i=e.getDate(),r=e.getDay(),l=new Date(a,n,i-r-6),o=new Date(a,n,i-r);t.$emit("pick",[l,o])}},{text:"本周",onClick:function(t){var e=new Date,a=e.getFullYear(),n=e.getMonth(),i=e.getDate(),r=e.getDay(),l=new Date(a,n,i-r+1);t.$emit("pick",[l,e])}},{text:"上月",onClick:function(t){var e=new Date,a=e.getFullYear(),n=e.getMonth()-1,i=new Date(a,n,1),r=new Date(a,n,1),l=new Date(a,n+1,1),o=(l-r)/864e5,s=new Date(a,n,o);t.$emit("pick",[i,s])}},{text:"本月",onClick:function(t){var e=new Date,a=e.getFullYear(),n=e.getMonth(),i=new Date;i.setDate(1),i.setMonth(i.getMonth()-1);var r=new Date(a,n,1);t.$emit("pick",[r,e])}},{text:"本季度",onClick:function(t){var e=new Date,a=e.getFullYear(),n=e.getMonth(),i=0;n<3&&(i=0),2<n&&n<6&&(i=3),5<n&&n<9&&(i=6),n>8&&(i=9);var r=new Date(a,i,1);t.$emit("pick",[r,e])}},{text:"本年",onClick:function(t){var e=new Date,a=e.getFullYear(),n=new Date(a,0,1);t.$emit("pick",[n,e])}}]};e["a"]=n},"23ed":function(t,e,a){"use strict";var n=a("9cfc"),i=a.n(n);i.a},"3f7b":function(t,e,a){},8390:function(t,e,a){"use strict";var n=a("3f7b"),i=a.n(n);i.a},"9cfc":function(t,e,a){},e9ad:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"charts",attrs:{id:t.id}})},i=[],r=(a("ac6a"),a("7f7f"),a("313e")),l=a.n(r),o={name:"column-chart",props:{chartData:{type:Object,default:function(){}},id:{type:String,default:"charts"}},watch:{chartData:{handler:function(t,e){this.chartData=t,this.init()},deep:!0}},methods:{init:function(){var t=this,e=l.a.init(document.getElementById(this.id));e.setOption({textStyle:{fontSize:14},title:{text:this.chartData.title,left:"5%",textStyle:{color:"#62523a",fontSize:16}},legend:{data:this.chartData.legend,itemWidth:10,itemHeight:10,itemGap:60,textStyle:{color:"#746651"}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:function(e){for(var a=2===t.chartData.type?"%":1===t.chartData.type?"人":"",n=["linear-gradient(0deg,#5cf2c6 0%, #8cffb8 100%,#56ecc3 100%, #20d8cd 100%)","linear-gradient(180deg, #fde18d 0%,#ff8676 100%)"],i=["linear-gradient(0deg,#72c6f2 0%, #befaff 100%);","linear-gradient(180deg, #ffea8b 0%, #ffc376 100%)"],r=1===t.chartData.type?n:i,l=e[0].name+"<br/>",o=0;o<e.length;o++){var s='<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-image:'+r[o]+';"></span>';l+=s+e[o].seriesName+"："+e[o].value+" "+a+"<br/>"}return l}},grid:{left:"5%",right:"5%",bottom:"5%",containLabel:!0},xAxis:[{type:"category",data:this.chartData.xAxis,axisPointer:{type:"shadow"},axisLine:{lineStyle:{color:"#f5efea"}},axisLabel:{color:"#746651",interval:0,textStyle:{fontSize:14}}}],yAxis:[{type:"value",nameGap:30,min:2===this.chartData.type?0:null,max:2===this.chartData.type?100:null,splitNumber:5,axisLine:{lineStyle:{color:"#f5efea"}},splitLine:{lineStyle:{color:"#f5efea"}},axisLabel:{color:"#746651",formatter:2===this.chartData.type?"{value} %":"{value}",textStyle:{fontSize:14}}}],series:this.formatSeries()},!0),window.addEventListener("resize",function(){e.resize()})},formatSeries:function(){var t=this,e=[];if(this.chartData.series.length>0){var a=[];a=2===this.chartData.type?[["#72c6f2","#befaff"],["#ffea8b","#ffc376"]]:[["#5cf2c6","#8cffb8"],["#fde18d","#ff8676"]],this.chartData.series.forEach(function(n,i){var r={};r.name=t.chartData.legend[i],r.type="bar",r.data=n,r.barWidth=20,r.label={},r.label.normal={},r.label.normal.show=!0,r.label.normal.position="top",r.itemStyle={},r.itemStyle.normal={},r.itemStyle.normal.color=function(){return{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:a[i][0]},{offset:1,color:a[i][1]}]}},e.push(r)})}return e}}},s=o,c=(a("8390"),a("2877")),u=Object(c["a"])(s,n,i,!1,null,"37586dee",null);e["a"]=u.exports}}]);
//# sourceMappingURL=chunk-6161e5f6.b4c0355b.js.map