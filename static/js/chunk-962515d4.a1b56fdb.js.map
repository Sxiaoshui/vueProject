{"version":3,"sources":["webpack:///./src/views/clinic-manage/report.vue?9ec3","webpack:///./src/views/clinic-manage/report.vue?0816","webpack:///src/views/clinic-manage/report.vue","webpack:///./src/views/clinic-manage/report.vue?01be","webpack:///./src/views/clinic-manage/report.vue"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_report_vue_vue_type_style_index_0_id_15cb1289_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_report_vue_vue_type_style_index_0_id_15cb1289_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","isLevel","_v","reportInfo","_s","userName","EMPTYTEXT","sexTypeStr","age","idNo","createDateStr","substr","_e","on","change","handleSelect","model","value","callback","$$v","selectIndex","expression","_l","item","index","key","label","ref","ruleForm","rules","label-width","label-position","projectName","it","i","itemName","$set","m","split","prop","type","maxlength","trim","click","$event","handleBackList","submitForm","staticRenderFns","reportvue_type_script_lang_js_","name","data","resultList","diagnoseOpinion","required","message","trigger","created","getDetailInfo","methods","forEach","childrens","resultDesc","resultDescArr","_this","$emit","$http","post","resultIdList","$route","query","ids","then","res","code","result","items","length","_result","find","projectId","xitems","itemId","push","undefined","obj","parentObj","_obj","_parentObj","_obj2","$message","error","msg","catch","formName","_this2","$refs","validate","valid","params","recordId","originData","JSON","parse","stringify_default","itemArr","map","apply","Object","toConsumableArray","itemsJson","$confirm","confirmButtonText","cancelButtonText","customClass","center","success","$router","path","clinic_manage_reportvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__"],"mappings":"2IAAA,IAAAA,EAAAC,EAAA,QAAAC,EAAAD,EAAAE,EAAAH,GAAyjBE,EAAG,4CCA5jB,IAAAE,EAAA,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,qBAAgC,CAAAF,EAAA,OAAYE,YAAA,aAAwB,CAAAF,EAAA,cAAmBG,MAAA,CAAOC,QAAA,MAAa,GAAAJ,EAAA,OAAgBE,YAAA,aAAwB,CAAAF,EAAA,MAAWE,YAAA,SAAoB,CAAAN,EAAAS,GAAA,UAAAT,EAAAU,YAAAV,EAAAU,WAAA,GAAAN,EAAA,OAAmEE,YAAA,YAAuB,CAAAF,EAAA,MAAAA,EAAA,MAAAA,EAAA,QAAAJ,EAAAS,GAAA,SAAAL,EAAA,SAAAJ,EAAAS,GAAAT,EAAAW,GAAAX,EAAAU,WAAA,GAAAE,UAAAZ,EAAAa,gBAAAT,EAAA,MAAAA,EAAA,QAAAJ,EAAAS,GAAA,SAAAL,EAAA,SAAAJ,EAAAS,GAAAT,EAAAW,GAAAX,EAAAU,WAAA,GAAAI,YAAAd,EAAAa,gBAAAT,EAAA,MAAAA,EAAA,QAAAJ,EAAAS,GAAA,SAAAL,EAAA,SAAAJ,EAAAS,GAAAT,EAAAW,GAAA,OAAAX,EAAAU,WAAA,GAAAK,IAAAf,EAAAU,WAAA,GAAAK,IAAA,IAAAf,EAAAa,gBAAAT,EAAA,MAAAA,EAAA,QAAAJ,EAAAS,GAAA,WAAAL,EAAA,SAAAJ,EAAAS,GAAAT,EAAAW,GAAAX,EAAAU,WAAA,GAAAM,MAAAhB,EAAAa,gBAAAT,EAAA,MAAAA,EAAA,QAAAJ,EAAAS,GAAA,WAAAL,EAAA,SAAAJ,EAAAS,GAAAT,EAAAW,GAAAX,EAAAU,WAAA,GAAAO,cAAAjB,EAAAU,WAAA,GAAAO,cAAAC,OAAA,MAAAlB,EAAAa,oBAAAb,EAAAmB,KAAAf,EAAA,OAAyqBE,YAAA,cAAyB,CAAAF,EAAA,OAAYE,YAAA,oBAA+B,CAAAF,EAAA,MAAAJ,EAAAS,GAAA,WAAAL,EAAA,OAAuCE,YAAA,eAA0B,CAAAF,EAAA,kBAAuBgB,GAAA,CAAIC,OAAArB,EAAAsB,cAA0BC,MAAA,CAAQC,MAAAxB,EAAA,YAAAyB,SAAA,SAAAC,GAAiD1B,EAAA2B,YAAAD,GAAoBE,WAAA,gBAA2B5B,EAAA6B,GAAA7B,EAAA,oBAAA8B,EAAAC,GAA8C,OAAA3B,EAAA,YAAsB4B,IAAAD,EAAAxB,MAAA,CAAiB0B,MAAAF,IAAe,CAAA/B,EAAAS,GAAAT,EAAAW,GAAA,MAAAoB,EAAA,OAAAD,EAAAb,oBAAkE,SAAAb,EAAA,WAAyB8B,IAAA,WAAA3B,MAAA,CAAsBgB,MAAAvB,EAAAmC,SAAAC,MAAApC,EAAAoC,MAAAC,cAAA,MAAAC,iBAAA,SAAoF,CAAAtC,EAAA6B,GAAA7B,EAAAmC,SAAA,oBAAAL,EAAAC,GAAwD,OAAA3B,EAAA,OAAiB4B,IAAAD,EAAAzB,YAAA,YAAiC,CAAAF,EAAA,MAAAJ,EAAAS,GAAAT,EAAAW,GAAAmB,EAAAS,gBAAAvC,EAAA6B,GAAAC,EAAA,mBAAAU,EAAAC,GAAqF,OAAArC,EAAA,OAAiB4B,IAAAS,GAAM,CAAArC,EAAA,gBAAqBG,MAAA,CAAO0B,MAAAO,EAAAE,SAAA,MAA2B,CAAAtC,EAAA,kBAAuBmB,MAAA,CAAOC,MAAAgB,EAAA,WAAAf,SAAA,SAAAC,GAA+C1B,EAAA2C,KAAAH,EAAA,aAAAd,IAAgCE,WAAA,kBAA6B5B,EAAA6B,GAAAW,EAAA,uBAAAI,EAAA9C,GAAyC,OAAAM,EAAA,YAAsB4B,IAAAlC,EAAAS,MAAA,CAAa0B,MAAAW,IAAW,CAAA5C,EAAAS,GAAAT,EAAAW,GAAAiC,EAAAC,MAAA,mBAA2C,cAAa,KAAMzC,EAAA,gBAAqBG,MAAA,CAAO0B,MAAA,QAAAa,KAAA,oBAA0C,CAAA1C,EAAA,YAAiBG,MAAA,CAAOwC,KAAA,WAAAC,UAAA,OAAoCzB,MAAA,CAAQC,MAAAxB,EAAAmC,SAAA,gBAAAV,SAAA,SAAAC,GAA8D1B,EAAA2C,KAAA3C,EAAAmC,SAAA,oCAAAT,IAAAuB,OAAAvB,IAAsFE,WAAA,+BAAwC,OAAAxB,EAAA,OAAoBE,YAAA,WAAsB,CAAAF,EAAA,aAAkBgB,GAAA,CAAI8B,MAAA,SAAAC,GAAyB,OAAAnD,EAAAoD,oBAA8B,CAAApD,EAAAS,GAAA,SAAAL,EAAA,aAAkCG,MAAA,CAAOwC,KAAA,WAAiB3B,GAAA,CAAK8B,MAAA,SAAAC,GAAyB,OAAAnD,EAAAqD,WAAA,eAAoC,CAAArD,EAAAS,GAAA,yBAC/sF6C,EAAA,gDCyFAC,uBAAA,CACAC,KAAA,gBACAC,KAFA,WAGA,OACA/C,WAAA,GACAiB,YAAA,EACAQ,SAAA,CACAuB,WAAA,GACAC,gBAAA,IAEAvB,MAAA,CAIAuB,gBAAA,EAAAC,UAAA,EAAAC,QAAA,UAAAC,QAAA,cAIAC,QAlBA,WAmBA9D,KAAA+D,iBAEAC,QAAA,CAEA3C,aAFA,SAEAS,GACA9B,KAAAkC,SAAAuB,WAAAQ,QAAA,SAAApC,GACAA,EAAAqC,UAAAD,QAAA,SAAA1B,GACAA,EAAA4B,WAAA5B,EAAA6B,cAAAtC,QAKAiC,cAVA,WAUA,IAAAM,EAAArE,KACAA,KAAAsE,MAAA,eACAtE,KAAAuE,MACAC,KAAA,8EACAC,aAAAzE,KAAA0E,OAAAC,MAAAC,MAEAC,KAAA,SAAAC,GACA,MAAAA,EAAAC,MACAV,EAAA5D,WAAAqE,EAAAtB,MAAA,GAEAa,EAAAnC,SAAAuB,WAAA,GACAY,EAAA5D,WAAAwD,QAAA,SAAAe,EAAAlD,GACAkD,EAAAC,MAAAhB,QAAA,SAAApC,GACA,GAAAwC,EAAAnC,SAAAuB,WAAAyB,OAAA,GACA,IAAAC,EAAAd,EAAAnC,SAAAuB,WAAA2B,KAAA,SAAA7C,GAAA,OAAAA,EAAA8C,WAAAxD,EAAAwD,YACA,GAAAF,EAAA,CACA,IAAAG,EAAAH,EAAAjB,UAAAkB,KAAA,SAAA7C,GAAA,OAAAA,EAAAgD,QAAA1D,EAAA0D,SACA,GAAAD,EACAA,EAAAlB,cAAAoB,UACAC,IAAA5D,EAAAsC,WAAArC,EAAA,IAAAD,EAAAsC,WAAArC,EAAA,SAEA,CACA,IAAA4D,EAAA,GACAA,EAAAH,OAAA1D,EAAA0D,OACAG,EAAAjD,SAAAZ,EAAAY,SACAiD,EAAAtB,cAAA,GACAsB,EAAAtB,cAAAoB,UACAC,IAAA5D,EAAAsC,WAAArC,EAAA,IAAAD,EAAAsC,WAAArC,EAAA,KAEA4D,EAAAvB,WAAAuB,EAAAtB,cAAA,GACAe,EAAAjB,UAAAsB,KAAAE,QAEA,CACA,IAAAC,EAAA,GACAA,EAAAN,UAAAxD,EAAAwD,UACAM,EAAArD,YAAAT,EAAAS,YACAqD,EAAAzB,UAAA,GACA,IAAA0B,EAAA,GACAA,EAAAL,OAAA1D,EAAA0D,OACAK,EAAAnD,SAAAZ,EAAAY,SACAmD,EAAAxB,cAAA,GACAwB,EAAAxB,cAAAoB,UACAC,IAAA5D,EAAAsC,WAAArC,EAAA,IAAAD,EAAAsC,WAAArC,EAAA,KAEA8D,EAAAzB,WAAAyB,EAAAxB,cAAA,GACAuB,EAAAzB,UAAAsB,KAAAI,GACAvB,EAAAnC,SAAAuB,WAAA+B,KAAAG,QAEA,CACA,IAAAE,EAAA,GACAA,EAAAR,UAAAxD,EAAAwD,UACAQ,EAAAvD,YAAAT,EAAAS,YACAuD,EAAA3B,UAAA,GACA,IAAA4B,EAAA,GACAA,EAAAP,OAAA1D,EAAA0D,OACAO,EAAArD,SAAAZ,EAAAY,SACAqD,EAAA1B,cAAA,GACA0B,EAAA1B,cAAAoB,UACAC,IAAA5D,EAAAsC,WAAArC,EAAA,IAAAD,EAAAsC,WAAArC,EAAA,KAEAgE,EAAA3B,WAAA2B,EAAA1B,cAAA,GACAyB,EAAA3B,UAAAsB,KAAAM,GACAzB,EAAAnC,SAAAuB,WAAA+B,KAAAK,SAKAxB,EAAA0B,SAAAC,MAAAlB,EAAAmB,KAEA5B,EAAAC,MAAA,iBAEA4B,MAAA,SAAAF,GACA3B,EAAAC,MAAA,eACAD,EAAA0B,SAAAC,YAIA5C,WAvFA,SAuFA+C,GAAA,IAAAC,EAAApG,KACAA,KAAAqG,MAAAF,GAAAG,SAAA,SAAAC,GACA,GAAAA,EAAA,CAEA,IAAAC,EAAA,GACAA,EAAA/B,aAAA2B,EAAA1B,OAAAC,MAAAC,IACA4B,EAAAC,SAAAL,EAAA3F,WAAA,IAAA2F,EAAA3F,WAAA,GAAAgG,SACAD,EAAA9C,gBAAA0C,EAAAlE,SAAAwB,gBACA,IAAAgD,EAAAC,KAAAC,MAAAC,IAAAT,EAAAlE,SAAAuB,aACAqD,EAAA,GACAJ,EAAAK,IAAA,SAAAlF,GAAA,OAAAiF,EAAAtB,KAAAwB,MAAAF,EAAAG,OAAAC,EAAA,KAAAD,CAAApF,EAAAqC,cACA4C,EAAAC,IAAA,SAAAlF,GACAA,EAAAsC,WAAAtC,EAAAsC,WAAAvB,MAAA,eACAf,EAAAuC,qBACAvC,EAAAY,WAEA+D,EAAAW,UAAAN,IAAAC,GACAV,EAAAgB,SAAA,4BACAC,kBAAA,MACAC,iBAAA,MACAC,YAAA,cACAC,QAAA,IACA3C,KAAA,WACAuB,EAAA7B,MACAC,KAAA,wEAAAgC,GACA3B,KAAA,SAAAC,GACA,MAAAA,EAAAC,MACAqB,EAAAL,SAAA0B,QAAA,QACArB,EAAAjD,kBAEAiD,EAAAL,SAAAC,MAAAlB,EAAAmB,OAGAC,MAAA,SAAAF,GACAI,EAAAL,SAAAC,iBAOA7C,eAhIA,WAiIAnD,KAAA0H,QAAAlC,KAAA,CACAmC,KAAA,4BCjP+VC,EAAA,0BCQ/VC,EAAgBZ,OAAAa,EAAA,KAAAb,CACdW,EACA9H,EACAuD,GACF,EACA,KACA,WACA,MAIe0E,EAAA,WAAAF","file":"static/js/chunk-962515d4.a1b56fdb.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./report.vue?vue&type=style&index=0&id=15cb1289&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./report.vue?vue&type=style&index=0&id=15cb1289&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"clinic-report-box\"},[_c('div',{staticClass:\"title-box\"},[_c('Breadcrumb',{attrs:{\"isLevel\":2}})],1),_c('div',{staticClass:\"inner-box\"},[_c('h2',{staticClass:\"title\"},[_vm._v(\"基本信息\")]),(_vm.reportInfo && _vm.reportInfo[0])?_c('div',{staticClass:\"text-box\"},[_c('ul',[_c('li',[_c('span',[_vm._v(\"姓名：\")]),_c('label',[_vm._v(_vm._s(_vm.reportInfo[0].userName || _vm.EMPTYTEXT))])]),_c('li',[_c('span',[_vm._v(\"性别：\")]),_c('label',[_vm._v(_vm._s(_vm.reportInfo[0].sexTypeStr || _vm.EMPTYTEXT))])]),_c('li',[_c('span',[_vm._v(\"年龄：\")]),_c('label',[_vm._v(_vm._s(_vm.reportInfo[0].age !== null ? _vm.reportInfo[0].age + '岁' : _vm.EMPTYTEXT))])]),_c('li',[_c('span',[_vm._v(\"身份证号：\")]),_c('label',[_vm._v(_vm._s(_vm.reportInfo[0].idNo || _vm.EMPTYTEXT))])]),_c('li',[_c('span',[_vm._v(\"体检日期：\")]),_c('label',[_vm._v(_vm._s(_vm.reportInfo[0].createDateStr ? _vm.reportInfo[0].createDateStr.substr(0, 10) : _vm.EMPTYTEXT))])])])]):_vm._e(),_c('div',{staticClass:\"report-box\"},[_c('div',{staticClass:\"report-title-box\"},[_c('h4',[_vm._v(\"主导报告:\")]),_c('div',{staticClass:\"content-box\"},[_c('el-radio-group',{on:{\"change\":_vm.handleSelect},model:{value:(_vm.selectIndex),callback:function ($$v) {_vm.selectIndex=$$v},expression:\"selectIndex\"}},_vm._l((_vm.reportInfo),function(item,index){return _c('el-radio',{key:index,attrs:{\"label\":index}},[_vm._v(_vm._s('报告' + (index + 1) + '：' + item.createDateStr))])}),1)],1)]),_c('el-form',{ref:\"ruleForm\",attrs:{\"model\":_vm.ruleForm,\"rules\":_vm.rules,\"label-width\":\"20%\",\"label-position\":\"left\"}},[_vm._l((_vm.ruleForm.resultList),function(item,index){return _c('div',{key:index,staticClass:\"item-box\"},[_c('h3',[_vm._v(_vm._s(item.projectName))]),_vm._l((item.childrens),function(it,i){return _c('div',{key:i},[_c('el-form-item',{attrs:{\"label\":it.itemName + '：'}},[_c('el-radio-group',{model:{value:(it.resultDesc),callback:function ($$v) {_vm.$set(it, \"resultDesc\", $$v)},expression:\"it.resultDesc\"}},_vm._l((it.resultDescArr),function(m,n){return _c('el-radio',{key:n,attrs:{\"label\":m}},[_vm._v(_vm._s(m.split('-')[1] || '-'))])}),1)],1)],1)})],2)}),_c('el-form-item',{attrs:{\"label\":\"诊断意见：\",\"prop\":\"diagnoseOpinion\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"maxlength\":\"128\"},model:{value:(_vm.ruleForm.diagnoseOpinion),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"diagnoseOpinion\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"ruleForm.diagnoseOpinion\"}})],1)],2),_c('div',{staticClass:\"btn-box\"},[_c('el-button',{on:{\"click\":function($event){return _vm.handleBackList()}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitForm('ruleForm')}}},[_vm._v(\"合并体检报告\")])],1)],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/*\r\n * @Author: xiaoshui.candy \r\n * @Date: 2019-07-02 13:52:03 \r\n * @Last Modified by: xiaoshui.candy\r\n * @Last Modified time: 2019-07-09 17:29:49\r\n */\r\n<template>\r\n  <div class=\"clinic-report-box\">\r\n    <!-- 标题 -->\r\n    <div class=\"title-box\">\r\n      <Breadcrumb :isLevel=\"2\"></Breadcrumb>\r\n    </div>\r\n    <!-- 主要内容 -->\r\n    <div class=\"inner-box\">\r\n      <h2 class=\"title\">基本信息</h2>\r\n      <!-- 基本信息 -->\r\n      <div class=\"text-box\" v-if=\"reportInfo && reportInfo[0]\">\r\n        <ul>\r\n          <li>\r\n            <span>姓名：</span><label>{{ reportInfo[0].userName || EMPTYTEXT }}</label>\r\n          </li>\r\n          <li>\r\n            <span>性别：</span><label>{{ reportInfo[0].sexTypeStr || EMPTYTEXT }}</label>\r\n          </li>\r\n          <li>\r\n            <span>年龄：</span>\r\n            <label>{{ reportInfo[0].age !== null ? reportInfo[0].age + '岁' : EMPTYTEXT }}</label>\r\n          </li>\r\n          <li>\r\n            <span>身份证号：</span><label>{{ reportInfo[0].idNo || EMPTYTEXT }}</label>\r\n          </li>\r\n          <li>\r\n            <span>体检日期：</span\r\n            ><label>{{\r\n              reportInfo[0].createDateStr ? reportInfo[0].createDateStr.substr(0, 10) : EMPTYTEXT\r\n            }}</label>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n      <!-- 体检报告 -->\r\n      <div class=\"report-box\">\r\n        <div class=\"report-title-box\">\r\n          <h4>主导报告:</h4>\r\n          <div class=\"content-box\">\r\n            <el-radio-group v-model=\"selectIndex\" @change=\"handleSelect\">\r\n              <el-radio v-for=\"(item, index) in reportInfo\" :key=\"index\" :label=\"index\">{{\r\n                '报告' + (index + 1) + '：' + item.createDateStr\r\n              }}</el-radio>\r\n            </el-radio-group>\r\n          </div>\r\n        </div>\r\n        <el-form\r\n          :model=\"ruleForm\"\r\n          :rules=\"rules\"\r\n          ref=\"ruleForm\"\r\n          label-width=\"20%\"\r\n          label-position=\"left\"\r\n        >\r\n          <div class=\"item-box\" v-for=\"(item, index) in ruleForm.resultList\" :key=\"index\">\r\n            <h3>{{ item.projectName }}</h3>\r\n            <div v-for=\"(it, i) in item.childrens\" :key=\"i\">\r\n              <!-- 必填选择\r\n              :prop=\"'resultList.' + index+'.childrens.' + i +'.resultDesc'\" :rules=\"rules.resultDesc\" -->\r\n              <el-form-item :label=\"it.itemName + '：'\">\r\n                <el-radio-group v-model=\"it.resultDesc\">\r\n                  <el-radio v-for=\"(m, n) in it.resultDescArr\" :key=\"n\" :label=\"m\">{{\r\n                    m.split('-')[1] || '-'\r\n                  }}</el-radio>\r\n                </el-radio-group>\r\n              </el-form-item>\r\n            </div>\r\n          </div>\r\n          <el-form-item label=\"诊断意见：\" prop=\"diagnoseOpinion\">\r\n            <el-input\r\n              type=\"textarea\"\r\n              v-model.trim=\"ruleForm.diagnoseOpinion\"\r\n              maxlength=\"128\"\r\n            ></el-input>\r\n          </el-form-item>\r\n        </el-form>\r\n        <div class=\"btn-box\">\r\n          <el-button @click=\"handleBackList()\">取 消</el-button>\r\n          <el-button type=\"primary\" @click=\"submitForm('ruleForm')\">合并体检报告</el-button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'clinic-report',\r\n  data() {\r\n    return {\r\n      reportInfo: [], //报告结果\r\n      selectIndex: 0, //默认选择第几项的值\r\n      ruleForm: {\r\n        resultList: [], //整合项目集合\r\n        diagnoseOpinion: '' //诊断意见\r\n      },\r\n      rules: {\r\n        // resultDesc: [\r\n        //   { required:true,message:'请选择结果', trigger: 'change' }\r\n        // ],\r\n        diagnoseOpinion: [{ required: true, message: '请填写诊断意见', trigger: 'change' }]\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.getDetailInfo() //获取报告信息\r\n  },\r\n  methods: {\r\n    //主导报告发生改变\r\n    handleSelect(index) {\r\n      this.ruleForm.resultList.forEach(item => {\r\n        item.childrens.forEach(it => {\r\n          it.resultDesc = it.resultDescArr[index]\r\n        })\r\n      })\r\n    },\r\n    //获取报告信息\r\n    getDetailInfo() {\r\n      this.$emit('viewLoad', true)\r\n      this.$http\r\n        .post(process.env.VUE_APP_API + '/family/examResult/getDtoByResultIdList', {\r\n          resultIdList: this.$route.query.ids\r\n        })\r\n        .then(res => {\r\n          if (res.code === 200) {\r\n            this.reportInfo = res.data || []\r\n            //特殊数据处理\r\n            this.ruleForm.resultList = []\r\n            this.reportInfo.forEach((result, index) => {\r\n              result.items.forEach(item => {\r\n                if (this.ruleForm.resultList.length > 0) {\r\n                  let result = this.ruleForm.resultList.find(it => it.projectId == item.projectId)\r\n                  if (result) {\r\n                    let xitems = result.childrens.find(it => it.itemId == item.itemId)\r\n                    if (xitems) {\r\n                      xitems.resultDescArr.push(\r\n                        item.resultDesc !== undefined ? index + '-' + item.resultDesc : index + '-'\r\n                      )\r\n                    } else {\r\n                      let obj = {}\r\n                      obj.itemId = item.itemId //小项目id\r\n                      obj.itemName = item.itemName //小项目名称\r\n                      obj.resultDescArr = []\r\n                      obj.resultDescArr.push(\r\n                        item.resultDesc !== undefined ? index + '-' + item.resultDesc : index + '-'\r\n                      )\r\n                      obj.resultDesc = obj.resultDescArr[0] //小项目结果\r\n                      result.childrens.push(obj)\r\n                    }\r\n                  } else {\r\n                    let parentObj = {}\r\n                    parentObj.projectId = item.projectId //大项目id\r\n                    parentObj.projectName = item.projectName //大项目名称\r\n                    parentObj.childrens = []\r\n                    let obj = {}\r\n                    obj.itemId = item.itemId //小项目id\r\n                    obj.itemName = item.itemName //小项目名称\r\n                    obj.resultDescArr = []\r\n                    obj.resultDescArr.push(\r\n                      item.resultDesc !== undefined ? index + '-' + item.resultDesc : index + '-'\r\n                    )\r\n                    obj.resultDesc = obj.resultDescArr[0] //小项目结果\r\n                    parentObj.childrens.push(obj)\r\n                    this.ruleForm.resultList.push(parentObj)\r\n                  }\r\n                } else {\r\n                  let parentObj = {}\r\n                  parentObj.projectId = item.projectId\r\n                  parentObj.projectName = item.projectName\r\n                  parentObj.childrens = []\r\n                  let obj = {}\r\n                  obj.itemId = item.itemId //小项目id\r\n                  obj.itemName = item.itemName //小项目名称\r\n                  obj.resultDescArr = []\r\n                  obj.resultDescArr.push(\r\n                    item.resultDesc !== undefined ? index + '-' + item.resultDesc : index + '-'\r\n                  )\r\n                  obj.resultDesc = obj.resultDescArr[0] //小项目结果\r\n                  parentObj.childrens.push(obj)\r\n                  this.ruleForm.resultList.push(parentObj)\r\n                }\r\n              })\r\n            })\r\n          } else {\r\n            this.$message.error(res.msg)\r\n          }\r\n          this.$emit('viewLoad', false)\r\n        })\r\n        .catch(error => {\r\n          this.$emit('viewLoad', false)\r\n          this.$message.error(error)\r\n        })\r\n    },\r\n    //保存设置\r\n    submitForm(formName) {\r\n      this.$refs[formName].validate(valid => {\r\n        if (valid) {\r\n          //数据整合\r\n          let params = {}\r\n          params.resultIdList = this.$route.query.ids\r\n          params.recordId = this.reportInfo[0] && this.reportInfo[0].recordId\r\n          params.diagnoseOpinion = this.ruleForm.diagnoseOpinion\r\n          let originData = JSON.parse(JSON.stringify(this.ruleForm.resultList))\r\n          let itemArr = []\r\n          originData.map(item => itemArr.push(...item.childrens))\r\n          itemArr.map(item => {\r\n            item.resultDesc = item.resultDesc.split('-')[1]\r\n            delete item.resultDescArr\r\n            delete item.itemName\r\n          })\r\n          params.itemsJson = JSON.stringify(itemArr)\r\n          this.$confirm('合并报告后将删除已选的报告，确认合并？', '提示', {\r\n            confirmButtonText: '确 认',\r\n            cancelButtonText: '取 消',\r\n            customClass: 'infoMessage',\r\n            center: true\r\n          }).then(() => {\r\n            this.$http\r\n              .post(process.env.VUE_APP_API + '/family/examResult/mergeExamResult', params)\r\n              .then(res => {\r\n                if (res.code === 200) {\r\n                  this.$message.success('合并成功')\r\n                  this.handleBackList() //返回列表\r\n                } else {\r\n                  this.$message.error(res.msg)\r\n                }\r\n              })\r\n              .catch(error => {\r\n                this.$message.error(error)\r\n              })\r\n          })\r\n        }\r\n      })\r\n    },\r\n    //返回列表\r\n    handleBackList() {\r\n      this.$router.push({\r\n        path: '/clinic-manage/list'\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.clinic-report-box {\r\n  .inner-box {\r\n    width: 80%;\r\n    margin: 50px auto;\r\n    .title {\r\n      text-align: center;\r\n      margin-bottom: 30px;\r\n    }\r\n    h2,\r\n    h3 {\r\n      font-size: 16px;\r\n      color: #62523a;\r\n      margin: 10px 0px;\r\n      font-weight: bold;\r\n    }\r\n    .text-box {\r\n      ul {\r\n        display: flex;\r\n        flex-wrap: wrap;\r\n        > li {\r\n          width: 20%;\r\n          line-height: 20px;\r\n          list-style: none;\r\n          margin-bottom: 20px;\r\n          font-size: 14px;\r\n          color: #746651;\r\n          display: flex;\r\n          span {\r\n            text-align: right;\r\n          }\r\n          label {\r\n            display: inline-block;\r\n            flex: 1;\r\n            overflow: hidden;\r\n            text-overflow: ellipsis;\r\n            display: -webkit-box;\r\n            -webkit-line-clamp: 2;\r\n            -webkit-box-orient: vertical;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    .report-title-box {\r\n      display: flex;\r\n      border-top: 1px solid #f5efea;\r\n      height: 40px;\r\n      align-items: center;\r\n      h4 {\r\n        width: 20%;\r\n        font-weight: bold;\r\n      }\r\n      .content-box {\r\n        flex: 1;\r\n        width: 100%;\r\n        .el-radio-group {\r\n          width: 100%;\r\n          .el-radio {\r\n            width: 25%;\r\n            margin-right: 0px;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    .item-box {\r\n      border-top: 1px solid #f5efea;\r\n      .el-form-item {\r\n        margin-bottom: 10px;\r\n        .el-form-item__content {\r\n          .el-radio-group {\r\n            width: 100%;\r\n            .el-radio {\r\n              width: 25%;\r\n              margin-right: 0px;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./report.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./report.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./report.vue?vue&type=template&id=15cb1289&scoped=true&\"\nimport script from \"./report.vue?vue&type=script&lang=js&\"\nexport * from \"./report.vue?vue&type=script&lang=js&\"\nimport style0 from \"./report.vue?vue&type=style&index=0&id=15cb1289&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"15cb1289\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}