(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-29e9fbdf"],{"0d3e":function(e,t,a){"use strict";var s=a("593e"),r=a.n(s);r.a},1766:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"list-common-box"},[a("div",{staticClass:"title-box"},[a("Breadcrumb",{attrs:{isLevel:2}}),a("div",{staticClass:"rightbox"},[a("div",{staticClass:"item",on:{click:function(t){return e.handleAdd()}}},[a("cc-svg-icon",{attrs:{"icon-class":"add"}}),a("span",[e._v("新增")])],1)])],1),a("div",{staticClass:"card-box"},[a("div",{staticClass:"search-bar"},[a("div",{staticClass:"search-left"},[a("div",{staticClass:"search-item"},[a("span",{staticClass:"search-label"},[e._v("APP版本")]),a("el-input",{attrs:{placeholder:"请输入APP版本",clearable:""},model:{value:e.searchKey.versionNo,callback:function(t){e.$set(e.searchKey,"versionNo","string"===typeof t?t.trim():t)},expression:"searchKey.versionNo"}})],1),a("div",{staticClass:"search-item"},[a("span",{staticClass:"search-label"},[e._v("APP名称")]),a("el-input",{attrs:{placeholder:"请输入APP名称",clearable:""},model:{value:e.searchKey.appName,callback:function(t){e.$set(e.searchKey,"appName","string"===typeof t?t.trim():t)},expression:"searchKey.appName"}})],1)]),a("div",{staticClass:"search-right"},[a("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-search"},on:{click:function(t){return e.querylist()}}},[e._v("查询")]),a("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-delete"},on:{click:function(t){return e.Refreshlist()}}},[e._v("清空")])],1)]),a("div",{staticClass:"table-box"},[a("el-table",{attrs:{data:e.dataList,"tooltip-effect":"dark",stripe:"",height:"100%"}},[a("el-table-column",{attrs:{label:"序号",align:"center",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.$index+(e.pageNum-1)*e.pageSize+1)+"\n          ")]}}])}),a("el-table-column",{attrs:{prop:"versionNo",label:"APP版本",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.versionNo?t.row.versionNo:e.EMPTYTEXT)+"\n          ")]}}])}),a("el-table-column",{attrs:{prop:"appName",label:"APP名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.appName?t.row.appName:e.EMPTYTEXT)+"\n          ")]}}])}),a("el-table-column",{attrs:{prop:"appStatus",label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(1===t.row.appStatus?"已启用":2===t.row.appStatus?"已禁用":e.EMPTYTEXT)+"\n          ")]}}])}),a("el-table-column",{attrs:{prop:"registerUser",label:"上传人员",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.registerUser?t.row.registerUser:e.EMPTYTEXT)+"\n          ")]}}])}),a("el-table-column",{attrs:{prop:"createDateStr",label:"创建时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("                  \n            "+e._s(t.row.createDateStr?t.row.createDateStr:e.EMPTYTEXT)+"\n          ")]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("cc-svg-icon",{attrs:{"icon-class":"edit"},on:{click:function(a){return e.handleAdd(t.row.versionId)}}}),a("cc-svg-icon",{attrs:{"icon-class":"view"},on:{click:function(a){return e.handleDetail(t.row.versionId)}}})]}}])})],1)],1),a("div",{staticClass:"page-box"},[a("Paginaction",{ref:"paginationEvent",staticClass:"pagination",attrs:{goPage:e.pageNum,totalNum:e.totalNum},on:{updateList:e.changePage}})],1)]),a("addSoftware",{attrs:{id:e.versionId},on:{refresh:e.getDatalist},model:{value:e.softwareDialog,callback:function(t){e.softwareDialog=t},expression:"softwareDialog"}}),a("appDetail",{attrs:{id:e.versionId},model:{value:e.appDetailDialog,callback:function(t){e.appDetailDialog=t},expression:"appDetailDialog"}})],1)},r=[],i=a("5176"),l=a.n(i),o=a("a4bb"),n=a.n(o),p=(a("ac6a"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.id?"修改APP升级包":"新增APP升级包",visible:e.show,center:"",width:"550px","close-on-click-modal":!1},on:{"update:visible":function(t){e.show=t},close:function(t){return e.resetForm("ruleForm")}}},[a("el-form",{ref:"ruleForm",staticClass:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"110px"}},[a("el-form-item",{attrs:{label:"APP版本：",prop:"versionNo"}},[a("el-input",{staticClass:"input-box",attrs:{placeholder:"请输入APP版本",clearable:"",maxlength:"10"},model:{value:e.ruleForm.versionNo,callback:function(t){e.$set(e.ruleForm,"versionNo","string"===typeof t?t.trim():t)},expression:"ruleForm.versionNo"}})],1),a("el-form-item",{attrs:{label:"APP名称：",prop:"appName"}},[a("el-input",{staticClass:"input-box",attrs:{placeholder:"请输入APP名称",clearable:"",maxlength:"20"},model:{value:e.ruleForm.appName,callback:function(t){e.$set(e.ruleForm,"appName","string"===typeof t?t.trim():t)},expression:"ruleForm.appName"}})],1),a("el-form-item",{attrs:{label:"文件MD5码：",prop:"appMd5"}},[a("el-input",{staticClass:"input-box",attrs:{placeholder:"文件MD5码",clearable:"",disabled:""},model:{value:e.ruleForm.appMd5,callback:function(t){e.$set(e.ruleForm,"appMd5","string"===typeof t?t.trim():t)},expression:"ruleForm.appMd5"}})],1),a("el-form-item",{attrs:{label:"更新内容：",prop:"updateContent"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入更新内容",maxlength:"100",autosize:{minRows:2,maxRows:4}},model:{value:e.ruleForm.updateContent,callback:function(t){e.$set(e.ruleForm,"updateContent","string"===typeof t?t.trim():t)},expression:"ruleForm.updateContent"}})],1),a("el-form-item",{attrs:{label:"状态：",prop:"appStatus"}},[a("el-select",{staticClass:"input-box",attrs:{placeholder:"请选择状态"},model:{value:e.ruleForm.appStatus,callback:function(t){e.$set(e.ruleForm,"appStatus",t)},expression:"ruleForm.appStatus"}},e._l(e.statusOption,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{attrs:{label:"上传文件：",prop:"appUrl"}},[a("FileUpload",{attrs:{fileType:[".apk"],files:e.fileList},on:{change:e.fileChange}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确 认")])],1)],1)}),c=[],u=(a("c5f6"),a("af75")),h={name:"addSoftware",props:{value:{type:Boolean},id:{type:[String,Number],value:""}},model:{prop:"value",event:"change"},watch:{value:function(e){this.show=this.value,!0===this.show&&(this.id?this.getServicePackageDetail():this.initForm())}},data:function(){return{show:this.value,ruleForm:{versionNo:"",appName:"",appMd5:"",updateContent:"",appStatus:1,appUrl:""},fileList:[],statusOption:[{value:1,label:"已启用"},{value:2,label:"已禁用"}],rules:{versionNo:[{required:!0,message:"APP版本不能为空",trigger:"change"},{validator:u["a"].validateVersionNo,trigger:"change"}],appName:[{required:!0,message:"APP名称不能为空",trigger:"blur"}],updateContent:[{required:!0,message:"更新内容不能为空",trigger:"blur"}],appStatus:[{required:!0,message:"请选择服务包状态",trigger:"change"}],appUrl:[{required:!0,message:"请上传服务包",trigger:"change"}]}}},methods:{getServicePackageDetail:function(){var e=this;this.$http.get("http://bj-ihealthcare.com:52081/phs/family/appVersion/getByVersionId?versionId="+this.id).then(function(t){if(200===t.code){var a=t.data;for(var s in e.ruleForm)e.ruleForm[s]=a[s];e.fileList=[];var r={};r.name=a.fileName?a.fileName:a.appUrl,r.url=a.appUrl,e.fileList.push(r)}else e.$message.error(t.msg)}).catch(function(t){e.$message.error(t)})},fileChange:function(e){e&&e.length>0?(this.ruleForm.appUrl=e[0].url,this.ruleForm.appMd5=e[0].md5):(this.ruleForm.appUrl="",this.ruleForm.appMd5=""),this.$refs.ruleForm.validateField("appUrl")},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){e&&(t.ruleForm.appType=1,t.id?(t.ruleForm.versionId=t.id,t.editServicepackage(t.ruleForm)):(delete t.ruleForm.versionId,t.addServicepackage(t.ruleForm)))})},addServicepackage:function(e){var t=this;this.$http.post("http://bj-ihealthcare.com:52081/phs/family/appVersion/insert",e).then(function(e){200===e.code?(t.$message.success("添加成功"),t.show=!1,t.$emit("change",!1),t.$emit("refresh")):t.$message.error(e.msg)}).catch(function(e){t.$message.error(e)})},editServicepackage:function(e){var t=this;this.$http.post("http://bj-ihealthcare.com:52081/phs/family/appVersion/update",e).then(function(e){200===e.code?(t.$message.success("修改成功"),t.show=!1,t.$emit("change",!1),t.$emit("refresh")):t.$message.error(e.msg)}).catch(function(e){t.$message.error(e)})},initForm:function(){var e=this;n()(this.ruleForm).forEach(function(t){return e.ruleForm[t]=""}),this.ruleForm.appStatus=1,this.fileList=[]},resetForm:function(e){var t=this;this.show=!1,this.$emit("change",!1),this.$nextTick(function(){t.$refs[e].clearValidate()})}}},d=h,m=(a("a5ae"),a("2877")),f=Object(m["a"])(d,p,c,!1,null,"1c8d8962",null),g=f.exports,v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"app-detail-box",attrs:{title:"APP升级包详情",visible:e.show,center:"",width:"500px"},on:{"update:visible":function(t){e.show=t},close:function(t){return e.handleClose()}}},[e.appInfo?a("div",{staticClass:"app-list-box"},[a("ul",{staticClass:"team-list-box"},[a("li",[a("span",[e._v("APP版本：")]),a("label",[e._v(e._s(e.appInfo.versionNo||e.EMPTYTEXT))])]),a("li",[a("span",[e._v("APP名称：")]),a("label",[e._v(e._s(e.appInfo.appName||e.EMPTYTEXT))])]),a("li",[a("span",[e._v("上传人员：")]),a("label",[e._v(e._s(e.appInfo.registerUser||e.EMPTYTEXT))])]),a("li",[a("span",[e._v("文件MD5码：")]),a("label",[e._v(e._s(e.appInfo.appMd5||e.EMPTYTEXT))])]),a("li",[a("span",[e._v("更新内容：")]),a("label",[e._v(e._s(e.appInfo.updateContent||e.EMPTYTEXT))])]),a("li",[a("span",[e._v("状态：")]),a("label",[e._v(e._s(e.appInfo.appStatus?e.statusOption[e.appInfo.appStatus]:e.EMPTYTEXT))])]),a("li",[a("span",[e._v("上传文件：")]),a("label",[a("i",{staticClass:"el-icon-link"}),a("a",{attrs:{href:e.appInfo.appUrl,download:"true"}},[e._v(e._s(e.appInfo.appUrl))])])])])]):e._e(),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.handleClose()}}},[e._v("关闭")])],1)])},b=[],_={name:"app-detail",props:{value:{type:Boolean},id:{type:[String,Number],value:""}},model:{prop:"value",event:"change"},watch:{value:function(e){this.show=this.value,!0===this.show&&this.getAppDetail()}},data:function(){return{show:this.value,statusOption:{1:"已启用",2:"已禁用"},appInfo:null}},methods:{getAppDetail:function(){var e=this;this.$http.get("http://bj-ihealthcare.com:52081/phs/family/appVersion/getByVersionId?versionId="+this.id).then(function(t){200===t.code?e.appInfo=t.data:e.$message.error(t.msg)}).catch(function(t){e.$message.error(t)})},handleClose:function(e){this.show=!1,this.$emit("change",!1)}}},w=_,P=(a("0d3e"),Object(m["a"])(w,v,b,!1,null,null,null)),N=P.exports,y={name:"software-list",components:{addSoftware:g,appDetail:N},data:function(){return{searchKey:{versionNo:"",appName:""},pageNum:1,pageSize:10,totalNum:0,dataList:[],softwareDialog:!1,appDetailDialog:!1,versionId:""}},created:function(){this.getDatalist()},methods:{handleDetail:function(e){this.appDetailDialog=!0,this.versionId=e||""},handleAdd:function(e){this.softwareDialog=!0,this.versionId=e||""},querylist:function(){this.pageNum=1,this.getDatalist()},Refreshlist:function(){var e=this;this.pageNum=1,this.pageSize=10,n()(this.searchKey).forEach(function(t){return e.searchKey[t]=""}),this.getDatalist()},changePage:function(e){this.pageNum=e.pageNum,this.pageSize=e.pageSize,this.getDatalist()},getDatalist:function(e){var t=this;this.$emit("viewLoad",!0);var a={};a.pageNum=this.pageNum,a.pageSize=this.pageSize,a=l()({},a,this.searchKey),this.$http.post("http://bj-ihealthcare.com:52081/phs/family/appVersion/getByPage",a).then(function(e){200===e.code?(t.dataList=e.data.list||[],t.totalNum=e.data.total,t.pageNum=e.data.pageNum,t.pageSize=e.data.pageSize):t.$message.error(e.msg),t.$emit("viewLoad",!1)}).catch(function(e){t.$emit("viewLoad",!1),t.$message.error(e)})}}},F=y,S=Object(m["a"])(F,s,r,!1,null,"21c81e56",null);t["default"]=S.exports},5176:function(e,t,a){e.exports=a("51b6")},"593e":function(e,t,a){},"5ce0":function(e,t,a){},a5ae:function(e,t,a){"use strict";var s=a("5ce0"),r=a.n(s);r.a}}]);
//# sourceMappingURL=chunk-29e9fbdf.0e9c018f.js.map