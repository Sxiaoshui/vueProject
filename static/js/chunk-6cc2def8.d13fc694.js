(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6cc2def8"],{"01d7":function(e,t,a){"use strict";var i=a("fd1a"),l=a.n(i);l.a},"210f":function(e,t,a){"use strict";var i={shortcuts:[{text:"昨天",onClick:function(e){var t=new Date;t.setTime(t.getTime()-864e5);var a=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate();e.$emit("pick",[a,a])}},{text:"今天",onClick:function(e){var t=new Date;e.$emit("pick",[t,t])}},{text:"上周",onClick:function(e){var t=new Date,a=t.getFullYear(),i=t.getMonth(),l=t.getDate(),r=t.getDay(),o=new Date(a,i,l-r-6),s=new Date(a,i,l-r);e.$emit("pick",[o,s])}},{text:"本周",onClick:function(e){var t=new Date,a=t.getFullYear(),i=t.getMonth(),l=t.getDate(),r=t.getDay(),o=new Date(a,i,l-r+1);e.$emit("pick",[o,t])}},{text:"上月",onClick:function(e){var t=new Date,a=t.getFullYear(),i=t.getMonth()-1,l=new Date(a,i,1),r=new Date(a,i,1),o=new Date(a,i+1,1),s=(o-r)/864e5,n=new Date(a,i,s);e.$emit("pick",[l,n])}},{text:"本月",onClick:function(e){var t=new Date,a=t.getFullYear(),i=t.getMonth(),l=new Date;l.setDate(1),l.setMonth(l.getMonth()-1);var r=new Date(a,i,1);e.$emit("pick",[r,t])}},{text:"本季度",onClick:function(e){var t=new Date,a=t.getFullYear(),i=t.getMonth(),l=0;i<3&&(l=0),2<i&&i<6&&(l=3),5<i&&i<9&&(l=6),i>8&&(l=9);var r=new Date(a,l,1);e.$emit("pick",[r,t])}},{text:"本年",onClick:function(e){var t=new Date,a=t.getFullYear(),i=new Date(a,0,1);e.$emit("pick",[i,t])}}]};t["a"]=i},5176:function(e,t,a){e.exports=a("51b6")},"9b98":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"list-common-box"},[a("div",{staticClass:"title-box"},[a("Breadcrumb",{attrs:{isLevel:2}}),a("div",{staticClass:"rightbox"},[a("div",{staticClass:"item",on:{click:function(t){return e.handleAdd()}}},[a("cc-svg-icon",{attrs:{"icon-class":"upload"}}),a("span",[e._v("上传视频")])],1)])],1),a("div",{staticClass:"card-box"},[a("div",{staticClass:"search-bar"},[a("div",{staticClass:"search-left"},[a("div",{staticClass:"search-item"},[a("span",{staticClass:"search-label"},[e._v("视频名称")]),a("el-input",{attrs:{placeholder:"请输入视频名称",clearable:""},model:{value:e.searchKey.videoName,callback:function(t){e.$set(e.searchKey,"videoName","string"===typeof t?t.trim():t)},expression:"searchKey.videoName"}})],1),a("div",{staticClass:"search-item"},[a("span",{staticClass:"search-label"},[e._v("状态")]),a("el-select",{attrs:{placeholder:"请选择状态",clearable:""},model:{value:e.searchKey.videoStatus,callback:function(t){e.$set(e.searchKey,"videoStatus",t)},expression:"searchKey.videoStatus"}},e._l(e.statusOption,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("div",{staticClass:"search-item"},[a("span",{staticClass:"search-label"},[e._v("上传时间")]),a("el-date-picker",{attrs:{type:"daterange",align:"left","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions,"value-format":"yyyy-MM-dd",clearable:""},on:{change:e.handleDatechange},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1)]),a("div",{staticClass:"search-right"},[a("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-search"},on:{click:function(t){return e.querylist()}}},[e._v("查询")]),a("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-delete"},on:{click:function(t){return e.Refreshlist()}}},[e._v("清空")])],1)]),a("div",{staticClass:"table-box"},[a("el-table",{attrs:{data:e.dataList,"tooltip-effect":"dark",stripe:"",height:"100%"}},[a("el-table-column",{attrs:{label:"序号",align:"center",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.$index+(e.pageNum-1)*e.pageSize+1)+"\n          ")]}}])}),a("el-table-column",{attrs:{prop:"videoName",label:"视频名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.videoName?t.row.videoName:e.EMPTYTEXT)+"\n          ")]}}])}),a("el-table-column",{attrs:{prop:"fileFormat",label:"格式",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.fileFormat?t.row.fileFormat:e.EMPTYTEXT)+"\n          ")]}}])}),a("el-table-column",{attrs:{prop:"fileName",label:"文件名",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.fileName?t.row.fileName:e.EMPTYTEXT)+"\n          ")]}}])}),a("el-table-column",{attrs:{prop:"videoStatus",label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(1===t.row.videoStatus?"已启用":2===t.row.videoStatus?"已禁用":e.EMPTYTEXT)+"\n          ")]}}])}),a("el-table-column",{attrs:{prop:"registerUser",label:"上传人员",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.registerUser?t.row.registerUser:e.EMPTYTEXT)+"\n          ")]}}])}),a("el-table-column",{attrs:{prop:"createDateStr",label:"上传时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("                  \n            "+e._s(t.row.createDateStr?t.row.createDateStr:e.EMPTYTEXT)+"\n          ")]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("cc-svg-icon",{attrs:{"icon-class":"edit"},on:{click:function(a){return e.handleAdd(t.row.videoId)}}}),a("cc-svg-icon",{attrs:{"icon-class":"delete"},on:{click:function(a){return e.handleDelete(t.row)}}}),a("cc-svg-icon",{attrs:{"icon-class":"play"},on:{click:function(a){return e.handlePlay(t.row)}}})]}}])})],1)],1),a("div",{staticClass:"page-box"},[a("Paginaction",{ref:"paginationEvent",staticClass:"pagination",attrs:{goPage:e.pageNum,totalNum:e.totalNum},on:{updateList:e.changePage}})],1)]),a("addVideo",{attrs:{id:e.videoId},on:{refresh:e.getDatalist},model:{value:e.videoDialog,callback:function(t){e.videoDialog=t},expression:"videoDialog"}}),a("el-dialog",{staticClass:"video-play-box",attrs:{title:e.videoInfo.videoName,visible:e.playVideoDialog,center:""},on:{"update:visible":function(t){e.playVideoDialog=t}}},[a("video",{attrs:{src:e.videoInfo.fileUrl,controls:"controls"}},[e._v("\n       您的电脑暂不支持视频播放\n    ")])])],1)},l=[],r=a("5176"),o=a.n(r),s=a("a4bb"),n=a.n(s),c=(a("ac6a"),a("210f")),u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.id?"修改视频":"上传视频",visible:e.show,center:"",width:"550px","close-on-click-modal":!1},on:{"update:visible":function(t){e.show=t},close:function(t){return e.resetForm("ruleForm")}}},[a("el-form",{ref:"ruleForm",staticClass:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"110px"}},[a("el-form-item",{attrs:{label:"视频名称：",prop:"videoName"}},[a("el-input",{staticClass:"input-box",attrs:{placeholder:"请输入视频名称",clearable:"",maxlength:"50"},model:{value:e.ruleForm.videoName,callback:function(t){e.$set(e.ruleForm,"videoName","string"===typeof t?t.trim():t)},expression:"ruleForm.videoName"}})],1),a("el-form-item",{attrs:{label:"视频大小：",prop:"fileSize"}},[a("el-input",{staticClass:"input-box",attrs:{placeholder:"视频大小",clearable:"",disabled:""},model:{value:e.ruleForm.fileSize,callback:function(t){e.$set(e.ruleForm,"fileSize","string"===typeof t?t.trim():t)},expression:"ruleForm.fileSize"}})],1),a("el-form-item",{attrs:{label:"存储路径："}},[a("el-input",{staticClass:"input-box",attrs:{type:"textarea",placeholder:"存储路径",clearable:"",disabled:"",autosize:""},model:{value:e.ruleForm.fileUrl,callback:function(t){e.$set(e.ruleForm,"fileUrl","string"===typeof t?t.trim():t)},expression:"ruleForm.fileUrl"}})],1),a("el-form-item",{attrs:{label:"文件格式",prop:"fileFormat"}},[a("el-input",{staticClass:"input-box",attrs:{placeholder:"文件格式",clearable:"",disabled:""},model:{value:e.ruleForm.fileFormat,callback:function(t){e.$set(e.ruleForm,"fileFormat","string"===typeof t?t.trim():t)},expression:"ruleForm.fileFormat"}})],1),a("el-form-item",{attrs:{label:"状态：",prop:"videoStatus"}},[a("el-select",{staticClass:"input-box",attrs:{placeholder:"请选择状态"},model:{value:e.ruleForm.videoStatus,callback:function(t){e.$set(e.ruleForm,"videoStatus",t)},expression:"ruleForm.videoStatus"}},e._l(e.statusOption,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{attrs:{label:"上传文件：",prop:"fileUrl"}},[a("FileUpload",{attrs:{fileType:[".mp4",".rmvb"],files:e.fileList},on:{change:e.fileChange}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确 认")])],1)],1)},d=[],f=(a("7f7f"),a("c5f6"),a("af75"),{name:"addSoftware",props:{value:{type:Boolean},id:{type:[String,Number],value:""}},model:{prop:"value",event:"change"},watch:{value:function(e){this.show=this.value,!0===this.show&&(this.id?this.getVideoDetail():this.initForm())}},data:function(){return{show:this.value,ruleForm:{videoName:"",fileName:"",fileSize:"",fileFormat:"",fileUrl:"",videoStatus:1},fileList:[],statusOption:[{value:1,label:"已启用"},{value:2,label:"已禁用"}],rules:{videoName:[{required:!0,message:"APP名称不能为空",trigger:"blur"}],fileUrl:[{required:!0,message:"请上传视频",trigger:"change"}]}}},methods:{getVideoDetail:function(){var e=this;this.$http.get("http://bj-ihealthcare.com:52081/phs/family/video/getByVideoId?videoId="+this.id).then(function(t){if(200===t.code){var a=t.data;for(var i in e.ruleForm)e.ruleForm[i]=a[i];e.fileList=[];var l={};l.name=a.fileName?a.fileName:a.fileUrl,l.url=a.fileUrl,l.fileSize=a.fileSize,l.fileFormat=a.fileFormat,e.fileList.push(l)}else e.$message.error(t.msg)}).catch(function(t){e.$message.error(t)})},fileChange:function(e){e&&e.length>0?(this.fileUrl=e,this.ruleForm.fileName=e[0].name,this.ruleForm.fileUrl=e[0].url,this.ruleForm.fileSize=e[0].fileSize,this.ruleForm.fileFormat=e[0].fileFormat):(this.ruleForm.fileName="",this.ruleForm.fileUrl="",this.ruleForm.fileSize="",this.ruleForm.fileFormat=""),this.$refs.ruleForm.validateField("fileUrl")},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){e&&(t.id?(t.ruleForm.videoId=t.id,t.editVideo(t.ruleForm)):(delete t.ruleForm.videoId,t.addVideo(t.ruleForm)))})},addVideo:function(e){var t=this;this.$http.post("http://bj-ihealthcare.com:52081/phs/family/video/insert",e).then(function(e){200===e.code?(t.$message.success("添加成功"),t.show=!1,t.$emit("change",!1),t.$emit("refresh")):t.$message.error(e.msg)}).catch(function(e){t.$message.error(e)})},editVideo:function(e){var t=this;this.$http.post("http://bj-ihealthcare.com:52081/phs/family/video/update",e).then(function(e){200===e.code?(t.$message.success("修改成功"),t.show=!1,t.$emit("change",!1),t.$emit("refresh")):t.$message.error(e.msg)}).catch(function(e){t.$message.error(e)})},initForm:function(){var e=this;n()(this.ruleForm).forEach(function(t){return e.ruleForm[t]=""}),this.ruleForm.videoStatus=1,this.fileList=[]},resetForm:function(e){var t=this;this.show=!1,this.$emit("change",!1),this.$nextTick(function(){t.$refs[e].clearValidate()})}}}),m=f,h=(a("01d7"),a("2877")),p=Object(h["a"])(m,u,d,!1,null,"a18cd486",null),v=p.exports,g={name:"video-list",components:{addVideo:v},data:function(){return{date:"",searchKey:{videoName:"",videoStatus:"",startDate:"",endDate:""},pickerOptions:c["a"],statusOption:[{value:0,label:"全部"},{value:1,label:"已启用"},{value:2,label:"已禁用"}],pageNum:1,pageSize:10,totalNum:0,dataList:[],videoDialog:!1,videoId:"",playVideoDialog:!1,videoInfo:{}}},created:function(){this.getDatalist()},methods:{handleAdd:function(e){this.videoDialog=!0,this.videoId=e||""},handlePlay:function(e){this.playVideoDialog=!0,this.videoInfo=e||{}},handleDatechange:function(e){e&&e.length>0?(this.searchKey.startDate=e[0],this.searchKey.endDate=e[1]):(this.searchKey.startDate="",this.searchKey.endDate="")},querylist:function(){this.pageNum=1,this.getDatalist()},Refreshlist:function(){var e=this;this.pageNum=1,this.pageSize=10,this.date="",n()(this.searchKey).forEach(function(t){return e.searchKey[t]=""}),this.getDatalist()},changePage:function(e){this.pageNum=e.pageNum,this.pageSize=e.pageSize,this.getDatalist()},getDatalist:function(e){var t=this;this.$emit("viewLoad",!0);var a={};a.pageNum=this.pageNum,a.pageSize=this.pageSize,a=o()({},a,this.searchKey),this.$http.post("http://bj-ihealthcare.com:52081/phs/family/video/getByPage",a).then(function(e){200===e.code?(t.dataList=e.data.list||[],t.totalNum=e.data.total,t.pageNum=e.data.pageNum,t.pageSize=e.data.pageSize):t.$message.error(e.msg),t.$emit("viewLoad",!1)}).catch(function(e){t.$emit("viewLoad",!1),t.$message.error(e)})},handleDelete:function(e){var t=this;this.$confirm('确定删除"'+e.videoName+'"吗？',"提示",{confirmButtonText:"确 认",cancelButtonText:"取 消",customClass:"infoMessage",center:!0}).then(function(){t.$http.post("http://bj-ihealthcare.com:52081/phs/family/video/delete",{videoId:e.videoId}).then(function(e){200===e.code?(t.$message.success("删除成功"),t.getDatalist()):t.$message.error(e.msg)}).catch(function(e){t.$message.error(e)})})}}},b=g,F=(a("cf03"),Object(h["a"])(b,i,l,!1,null,null,null));t["default"]=F.exports},cf03:function(e,t,a){"use strict";var i=a("ef12"),l=a.n(i);l.a},ef12:function(e,t,a){},fd1a:function(e,t,a){}}]);
//# sourceMappingURL=chunk-6cc2def8.d13fc694.js.map